// https://en.wikipedia.org/wiki/ISO_4217
// https://en.wikipedia.org/wiki/List_of_countries_by_tax_rates
// https://restcountries.eu/
// https://restcountries.eu/rest/v2/all

const host = 'https://restcountries.eu'
const path = '/rest/v2/all'
const target = 'src/app/config/countries.ts'
const request = require('request')
const vats = [['Afghanistan','0%'], ['Albania','7000600000000000000♠6% (tourism services)\n7001200000000000000♠20% (others)'], ['Algeria','7000700000000000000♠7% (basic items)\n7001170000000000000♠17% (others)'], ['American Samoa','0%'], ['Andorra','5000000000000000000♠0%, 7000100000000000000♠1% or 7000250000000000000♠2.5% (reduced rates)\n7000450000000000000♠4.5% (standard rate)\n7000950000000000000♠9.5% (banking services)'], ['Angola','7001100000000000000♠10%'], ['Anguilla','0%'], ['Argentina','7001210000000000000♠21%'], ['Armenia','7001200000000000000♠20%'], ['Aruba','1.5% (turnover tax)'], ['Australia','5000000000000000000♠0% (essential items)\n7001100000000000000♠10% (others)'], ['Austria','7001100000000000000♠10% (basic items)\n7001130000000000000♠13% (tourism services)\n7001200000000000000♠20% (others)'], ['Azerbaijan','7001180000000000000♠18%'], ['Bahamas','0%-7.5%'], ['Bangladesh','7001150000000000000♠15%'], ['Barbados','7001175000000000000♠17.5% (hotel accommodation 7.5%)'], ['Bahrain','5%'], ['Belarus','7001200000000000000♠20% or 10%'], ['Belgium','7001210000000000000♠21% - 12% (restaurants) - 6% (essential and selected goods)'], ['Belize','7001125000000000000♠12.5%'], ['Benin','7001180000000000000♠18%'], ['Bermuda',''], ['Bhutan',''], ['Bolivia','7001130000000000000♠13% (VAT) – multiple rates (ICE: Consumption of specific products)'], ['Bosnia and Herzegovina','7001170000000000000♠17% FBiH and RS'], ['Botswana','7001120000000000000♠12%'], ['Brazil','7001170000000000000♠17% to 25%'], ['Brunei',''], ['Bulgaria','7001200000000000000♠20%'], ['Burkina Faso','7001180000000000000♠18%'], ['Burundi','7001180000000000000♠18%'], ['Cambodia','7001100000000000000♠10%'], ['Cameroon','7001192500000000000♠19.25%'], ['Canada','7000500000000000000♠5% (federal GST) + 5%-15% (provincial taxes)'], ['Cape Verde','7001150000000000000♠15%'], ['Cayman Islands','0%'], ['Central African Republic','7001190000000000000♠19%'], ['Chad',''], ['Chile','7001190000000000000♠19%'], ['China','7001170000000000000♠17% with many exceptions'], ['Colombia','7001190000000000000♠19%'], ['Comoros',''], ['Cook Islands',''], ['Democratic Republic of the Congo',''], ['Congo',''], ['Costa Rica','7001130000000000000♠13%'], ['Croatia','7001250000000000000♠25% (0% on books and some foods)'], ['Cuba','7000250000000000000♠2.5% to 20%'], ['Curaçao',''], ['Cyprus','7001190000000000000♠19% (5% or 0% for certain goods)'], ['Czech Republic','7001210000000000000♠21% (15% or 10% for certain goods)'], ['Denmark','7001250000000000000♠25%'], ['Djibouti',''], ['Dominica',''], ['Dominican Republic','18%'], ['Timor-Leste',''], ['Ecuador','7001140000000000000♠14% (standard), 15% (luxury goods), 0% (exports)'], ['Egypt','7001100000000000000♠10% (standard), 25% (luxury goods), 0% (exports)'], ['El Salvador','7001130000000000000♠13%'], ['Equatorial Guinea',''], ['Eritrea',''], ['Estonia','7001200000000000000♠20% or 9%'], ['Ethiopia',''], ['Falkland Islands','0%'], ['F.S. Micronesia',''], ['Fiji',''], ['Finland','7001240000000000000♠24%\n14% (food and fodder)\n10% (e.g. medicines, public transport)'], ['France','20%, 10% (restaurants, transportation, tourism), 5.5% (utilities), 2.1% (press)'], ['Gabon','7001180000000000000♠18%'], ['Gambia',''], ['Germany','7001190000000000000♠19% or 7% (e.g. food)'], ['Georgia','7001180000000000000♠18%'], ['Ghana',''], ['Gibraltar','0%'], ['Greece','7001240000000000000♠24%, 13% (Health,Tourism), and 6% (Theater tickets, books, medicine). For some islands away from the mainland the rates are 17%, 9% and 4%.'], ['Grenada',''], ['Guatemala','7001120000000000000♠12%'], ['Guinea',''], ['Guinea-Bissau',''], ['Guyana','7001160000000000000♠16% or 0%'], ['Guernsey','0% }'], ['Haiti',''], ['Honduras',''], ['Hong Kong','0%. The idea to levy GST was proposed and dropped in 2006.'], ['Hungary','7001270000000000000♠27%, 18% (milk, egg, pork, chicken meat, internet service, restaurant services), 5% (medicines, books)'], ['Iceland','7001240000000000000♠24% or 12%'], ['India','GST from 0% to 30% varying for both Goods and Services on 1211 items and services.'], ['Indonesia','7001100000000000000♠10%'], ['Iran','0%-9% - depending on item'], ['Iraq',''], ['Ireland','7001230000000000000♠23% Goods\n9%-13.5% Services\n0% certain items of food'], ['Isle of Man','20%, 5% on Home Renovations'], ['Israel','7001170000000000000♠17% on all the products and services (except for vegetables and fruits).'], ['Italy','7001220000000000000♠22% or 10% or 4% (food, books)'], ['Ivory Coast',''], ['Jamaica','GCT 7001165000000000000♠16.5%, SCT varies up to 20%'], ['Japan','7000800000000000000♠8% (consumption)'], ['Jersey','5%'], ['Jordan','7001160000000000000♠16% (GST)'], ['Kazakhstan','7001120000000000000♠12%'], ['Kenya','16%/12% (electricity & fuel) VAT, 0%/exempt FOOD + 12.5% Withholding tax, 5% contractor Withholding tax'], ['Kiribati',''], ['Kuwait','16%'], ['South Korea','7001100000000000000♠10%'], ['North Korea','2% to 4%'], ['Kyrgyzstan',''], ['Laos',''], ['Latvia','7001210000000000000♠21%'], ['Lebanon','7001100000000000000♠10%'], ['Lesotho',''], ['Liberia',''], ['Libya',''], ['Liechtenstein','2.5%-7000800000000000000♠8.0%, (lodging services 3.8%)'], ['Lithuania','7001210000000000000♠21%'], ['Luxembourg','7001170000000000000♠17%'], ['Macau','0%'], ['Macedonia','7001180000000000000♠18% or 5%'], ['Madagascar',''], ['Malawi',''], ['Malaysia','6% GST'], ['Maldives','7000600000000000000♠6% Since January 1, 2012 (Increased from 3.5% set on October 2, 2011)'], ['Mali',''], ['Malta','7001180000000000000♠18%'], ['Marshall Islands','2-4%'], ['Mauritania',''], ['Mauritius','7001150000000000000♠15%'], ['Mexico','7001160000000000000♠16%'], ['Moldova','7001200000000000000♠20%'], ['Monaco','7001196000000000000♠19.6%-5.5%'], ['Mongolia','10%'], ['Montenegro','7001190000000000000♠19%'], ['Montserrat',''], ['Morocco',''], ['Mozambique',''], ['Myanmar',''], ['Namibia',''], ['Nauru',''], ['  Nepal','7001130000000000000♠13%'], ['Netherlands','7001210000000000000♠21% (6% for essential and selected goods)'], ['New Zealand','7001150000000000000♠15% GST'], ['New Caledonia',''], ['Nicaragua',''], ['Niger',''], ['Nigeria','5%'], ['Niue',''], ['Norfolk Island',''], ['Norway','7001250000000000000♠25% or 15% (food and drink in shops) or 10% (transportation, cinema, hotel rooms)'], ['Oman','5%'], ['Pakistan','5000000000000000000♠0% or 17% (basic food items)'], ['Palau',''], ['Palestine','7001145000000000000♠14.5% (VAT)'], ['Panama','7000700000000000000♠7% (except for: essential goods 0%, alcohol and hotels 10%, tobacco 15%)'], ['Papua New Guinea',''], ['Paraguay','10%'], ['Peru','7001180000000000000♠18% (16% VAT + 2% Municipal Promotional Tax) 0–118% ISC Impuesto Selectivo al Consumo (To some products like liquor, cigarettes, etc.)'], ['Philippines','7001120000000000000♠12% or 7% or 0%\n(in some cases, foreign investors are zero-rated)\n'], ['Pitcairn Islands',''], ['Poland','7001230000000000000♠23% or 8% or 5%'], ['Portugal','7001230000000000000♠23%, 13%, 6%\nMadeira, Açores: 15%, 9%, 4%\n'], ['Puerto Rico','11.5%'], ['Qatar','0%'], ['Romania','7001190000000000000♠19% or 9% (food, medicines, books, newspapers, hotel ...), or 4%'], ['Russia','7001180000000000000♠18% or 10% (books, certain items of food, children goods)'], ['Rwanda',''], ['Saint Kitts and Nevis',''], ['Saint Lucia',''], ['Saint Pierre and Miquelon',''], ['Saint Vincent and the Grenadines',''], ['Samoa',''], ['San Marino','17% on imported goods. There is no VAT registration inside San Marino.'], ['São Tomé and Príncipe',''], ['Sark','0% - There is no VAT on Sark. Import duty is levied on some goods brought onto the island.'], ['Saudi Arabia','5%'], ['Senegal','7001200000000000000♠20%'], ['Serbia','20% or 8% or 0%\n(reduced rates are for certain goods)\n'], ['Seychelles',''], ['Sierra Leone',''], ['Singapore','7000700000000000000♠7% (GST)'], ['Sint Maarten',''], ['Slovakia','7001200000000000000♠20% 10% on medication and books'], ['Slovenia','7001220000000000000♠22% or 9.5%'], ['Solomon Islands',''], ['Somalia',''], ['South Africa','7001140000000000000♠14%'], ['South Sudan',''], ['Spain','21%, 10% & 4%'], ['Sri Lanka','5000000000000000000♠0% or 8% or 12%'], ['Sudan',''], ['Suriname',''], ['Swaziland','7001140000000000000♠14%'], ['Sweden','7001250000000000000♠25% or 12% or 6%'], [' Switzerland','7000800000000000000♠8.0% or 3.8% or 2.5%'], ['Syria',''], ['Taiwan','7000500000000000000♠5% VAT\nVarious rates of Gross receipts tax on a few industries, such as financial services.'], ['Tajikistan',''], ['Tanzania',''], ['Thailand','7%'], ['Togo',''], ['Tokelau',''], ['Tonga',''], ['Trinidad and Tobago','12.5%'], ['Tunisia','7001180000000000000♠18% or 12% or 6%'], ['Turkey','7001180000000000000♠18% or 8%(e.g. clothing) or 1%(certain food)'], ['Turkmenistan',''], ['Turks and Caicos Islands',''], ['Tuvalu',''], ['Uganda',''], ['Ukraine','20% or 7% or 0%'], ['United Arab Emirates',''], ['United Kingdom','7001200000000000000♠20% Standard Rate;\n5% Reduced Rate for home energy and renovations;\n0% Zero Rate for life necessities - groceries, water, prescription medications, medical equipment and supplies, public transport, children clothing, books and periodicals.'], ['United States','5000000000000000000♠0%-11.725% (state and local)'], ['Uruguay','7001220000000000000♠22% (basic) or 11% (minimum) or 0% (extent)'], ['Uzbekistan','0–7001200000000000000♠20%'], ['Vanuatu',''], ['Venezuela','8%–10%/7001120000000000000♠12%'], ['Vietnam','7001100000000000000♠10%'], ['British Virgin Islands',''], ['U.S. Virgin Islands\n50%-500%\n',''], ['Yemen','2%'], ['Zambia','7001175000000000000♠17.5%'], ['Zimbabwe','']]
request(host+path, (error, response, body)=>{
  if (!error&&response.statusCode===200) {
    const data = JSON.parse(body)
    let countries = {}
    data.forEach(({alpha2Code,name,currencies})=>{
      let vat = '';
      vats.forEach(([_name,_vat])=>{
          if (name===_name) vat = _vat;
      })
      countries[alpha2Code] = {alpha2Code,name,currencies,vat}
    })
    const fs = require('fs')
    const contents = 'export const COUNTRIES = '+JSON.stringify(countries)
            .replace(/"(\w+)":/g,'$1:')
            .replace(/'/g,'\\\'')
            .replace(/"/g,'\'')
    fs.writeFile(target, contents, err=>{
      if (err) {
        return console.log('Error writing file:', err)
      }
    });
  }
})